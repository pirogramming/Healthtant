<!--고급 검색 페이지-->

{% extends 'base/base.html' %}
{% load static %}

{% block title %}고급검색 - HEALTHTANT{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'search/css/advanced_search.css' %}">
{% endblock %}

{% block header_title %}
<h1 class="app-title">고급검색페이지</h1>
{% endblock %}

{% block header_search %}
<!-- 고급검색페이지에서는 기본 검색 영역을 숨김 -->
{% endblock %}

{% block header %}
<header class="app-header">
  <div class="status-bar"></div>
  
  <!-- 뒤로가기 버튼 + 제목 -->
  <div class="header-nav">
    <button class="back-button" onclick="history.back()" aria-label="뒤로가기">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
        <path d="M15 18L9 12L15 6" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>
    <h1 class="page-title">상세검색</h1>
  </div>
  <div class="header-divider"></div>
</header>
{% endblock %}

{% block content %}
<div class="advanced-search-container">

  <!-- 검색 섹션 -->
  <h2 class="advanced-search-title">성분으로 검색해보세요</h2>
  <div class="advanced-search-section">
    <div class="advanced-search-input-container">
      <div class="advanced-search-input-wrapper">
        <svg class="advanced-search-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
            <g clip-path="url(#clip0_75_2444)">
                <path d="M12.9167 11.6667H12.2583L12.025 11.4417C12.8417 10.4917 13.3333 9.25833 13.3333 7.91667C13.3333 4.925 10.9083 2.5 7.91667 2.5C4.925 2.5 2.5 4.925 2.5 7.91667C2.5 10.9083 4.925 13.3333 7.91667 13.3333C9.25833 13.3333 10.4917 12.8417 11.4417 12.025L11.6667 12.2583V12.9167L15.8333 17.075L17.075 15.8333L12.9167 11.6667ZM7.91667 11.6667C5.84167 11.6667 4.16667 9.99167 4.16667 7.91667C4.16667 5.84167 5.84167 4.16667 7.91667 4.16667C9.99167 4.16667 11.6667 5.84167 11.6667 7.91667C11.6667 9.99167 9.99167 11.6667 7.91667 11.6667Z" fill="#BBBBBB"/>
              </g>
              <defs>
                <clipPath id="clip0_75_2444">
                  <rect width="20" height="20" fill="white"/>
                </clipPath>
              </defs>
        </svg>
        <input type="text" class="advanced-search-input" placeholder="제품을 검색해보세요!" id="searchInput">
      </div>
      <button class="advanced-search-button" id="searchBtn">검색하기</button>
    </div>
  </div>

  <!-- 추천 제품 섹션 -->
  <h3 class="recommendation-title">이 제품을 {{user.username}}님께 추천합니다</h3>
  <div class="recommendation-section">
    <div class="product-list" id="productList">
      {% for food in foods %}
      <div class="product-card">
        <img src="{{ food.image }}" alt="{{ food.food_name }}" class="product-image">
        <div class="product-info">
          <h4 class="product-name">{{ food.food_name }}</h4>
          <p class="product-manufacturer">제조사: {{ food.manufacturer }}</p>
        </div>
        <button
          id="favoriteBtn"
          class="favorite-btn {% if product.is_favorite %}active{% endif %}"
          type="button"
          aria-pressed="{{ product.is_favorite|yesno:'true,false' }}"
          aria-label="즐겨찾기"
          data-product-id="{{ product.food_id }}"
          data-is-favorite="{{ product.is_favorite|yesno:'true,false' }}"
          data-is-authenticated="{{ user.is_authenticated|yesno:'true,false' }}">
        
          <!-- 기본: 비워진 하트, 활성화 시 CSS로 채움 -->
          <svg xmlns="http://www.w3.org/2000/svg" width="35" height="33" viewBox="0 0 35 33" fill="none" aria-hidden="true" focusable="false">
            <path class="heart-path" d="M17.5009 8.65503C20.2022 6.37317 24.3767 6.44891 26.9791 8.90171C29.5803 11.3556 29.67 15.2636 27.2505 17.8127L17.4986 27.0007L7.74912 17.8127C5.32957 15.2636 5.42042 11.3491 8.02052 8.90171C10.6252 6.45216 14.7916 6.36993 17.5009 8.65503Z"/>
          </svg>
        </button>
      </div>
    {% endfor %}
    </div>
  </div>
</div>
{% block bottom_navigation %}{% endblock %}
{% endblock %}

{% block extra_js %}
<script src="{% static 'search/js/advanced_search_page.js' %}"></script>
{% endblock %}

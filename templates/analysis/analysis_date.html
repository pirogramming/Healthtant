{% extends 'base/base.html' %}
{% load static %}

{% block title %}날짜 선택 - HEALTHTANT{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'analysis/analysis.css' %}">
{% endblock %}

{% block header %}
<header class="app-header">
  <div class="status-bar"></div>
  
  <!-- 뒤로가기 버튼 + 제목 -->
  <div class="header-nav">
    <button class="back-button" onclick="window.location.href='/'" aria-label="뒤로가기">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
        <path d="M15 18L9 12L15 6" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>
    <h1 class="page-title">분석하기</h1>
  </div>
</header>
{% endblock %}

{% block content %}
<div class="analysis-date-container">
    <h1 class="analysis-title">HEALTHTANT</h1>
    <p class="analysis-subtitle">분석을 시작할 날짜를 알려주세요.</p>
    
    <form class="date-selection-form" method="get" action="/analysis/result/">
        
        <div class="date-range-container">
            <div class="date-input-group">
                <label class="date-label" for="start_date">시작일</label>
                <input 
                    type="date" 
                    id="start_date" 
                    name="start_date" 
                    class="date-input"
                    required
                    max="{% now 'Y-m-d' %}"
                >
            </div>
            
            <div class="date-separator">~</div>
            
            <div class="date-input-group">
                <label class="date-label" for="end_date">종료일</label>
                <input 
                    type="date" 
                    id="end_date" 
                    name="end_date" 
                    class="date-input"
                    required
                    max="{% now 'Y-m-d' %}"
                >
            </div>
        </div>
        
        <button type="submit" class="analyze-button" id="analyzeBtn">
            분석하기
        </button>
    </form>
</div>
{% endblock %}

{% block bottom_navigation %}
{% endblock %}

{% block extra_js %}
<script>
// Django 템플릿에서 로그인 상태를 JavaScript로 전달
window.isAuthenticated = {{ user.is_authenticated|yesno:"true,false" }};
</script>
<script type="module" defer src="{% static 'analysis/js/analysis.js' %}"></script>
{% endblock %}


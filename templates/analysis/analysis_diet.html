{% extends 'analysis/analysis_base.html' %}
{% load static %}

{% block title %}ìƒì„¸ ì‹ì‚¬ ë¶„ì„ - HEALTHTANT{% endblock %}
{% block page_title %}ìƒì„¸ ì‹ì‚¬ ë¶„ì„{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'analysis/analysis.css' %}">
<link rel="stylesheet" href="{% static 'analysis/analysis_diet.css' %}">
{% endblock %}

{% block content %}
<div class="meal-detail-container">
  <!-- ë’¤ë¡œê°€ê¸° ë²„íŠ¼ -->
  <div class="back-button-container">
    <a href="/analysis/result/?start_date={{ start_date }}&end_date={{ end_date }}" class="back-button">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </a>
    <h1 class="page-title">ìƒì„¸ ì‹ì‚¬ ë¶„ì„</h1>
  </div>

  <!-- ê¸°ê°„ í‘œì‹œ ì¹´ë“œ -->
  <div class="period-card">
    <div class="period-header">
      <span class="period-icon">ğŸ“Š</span>
      <h2 class="period-title">{{ username }} ë‹˜ì˜ ì‹í’ˆë¶„ë¥˜ ì¢…í•©</h2>
    </div>
    <p class="period-subtitle">{{ start_date }} - {{ end_date }}</p>
  </div>

  <!-- ë©”ì¸ í†µê³„ ì¹´ë“œ -->
  <div class="main-stats-card">
    <div class="stats-content">
      <p class="stats-description">
        {{ username }} ë‹˜ì€ ì´ <span class="highlight-green">{{ total_meals }}íšŒ</span>ì˜ ë¼ë‹ˆì—ì„œ
        <span class="highlight-red">{{ total_products }}ê°œ</span>ì˜ ê°€ê³µì‹í’ˆì„ ë“œì…¨ì–´ìš”.
      </p>
      
      <div class="stats-detail">
        <p class="stats-note">ì‚¬ìš©ìê°€ ë“±ë¡í•œ ì‹ì‚¬ ë‚´ì—­ ê¸°ì¤€</p>
        
        <!-- ì§„í–‰ë¥  ë°” -->
        <div class="progress-container">
          <div class="progress-label">
            <span class="progress-text">ê°€ê³µì‹í’ˆ í¬í•¨ ë¼ë‹ˆ</span>
            <span class="progress-fraction">{{ processed_meals }}/{{ total_meals }} íšŒ</span>
          </div>
          <div class="progress-bar">
            <div class="progress-fill" style="width: {{ progress_percentage }}%;"></div>
          </div>
          <div class="progress-percentage">{{ progress_percentage|floatformat:0 }}%</div>
        </div>
      </div>
    </div>
    
    <!-- ê¶Œì¥ì‚¬í•­ ë°•ìŠ¤ -->
    <div class="recommendation-box">
      <p class="recommendation-text">
        ê°€ê³µì‹í’ˆì„ ì¡°ê¸ˆ ì¤„ì´ëŠ” ê²ƒ<br/>
        ì¢‹ì„ ê²ƒ ê°™ì•„ìš”! ğŸ’ª
      </p>
    </div>
  </div>

  <!-- ìƒì„¸ ë¶„ì„ ì¹´ë“œ -->
  <div class="detail-analysis-card">
    <div class="detail-header">
      <span class="detail-icon">ğŸ“Š</span>
      <h2 class="detail-title">{{ username }} ë‹˜ì´ ì„­ì·¨í•œ ì˜ì–‘ ì¶”ì´</h2>
    </div>
    <p class="detail-subtitle">{{ start_date }} - {{ end_date }}</p>
  </div>
</div>
{% endblock %}

{% block navigation %}
<!-- ë„¤ë¹„ê²Œì´ì…˜ ì œê±° -->
{% endblock %}

{% block extra_js %}
<script>
// í•„ìš”í•œ JavaScript ë¡œì§ ì¶”ê°€
console.log('Meal detail page loaded');
</script>
{% endblock %}
